<div class="container">

  <ng-include src="'app/navbar/navbar.html'"></ng-include>

  <accordion class="shim-list" close-others="false" ng-init="groupOpen=[false,false,false]">

    <accordion-group panel-class="shim-panel" is-open="groupOpen[1]" ng-repeat="(shimName, shim) in main.shims">
        <accordion-heading>
          <span class="glyphicon glyphicon-triangle-right"></span><h2>{{shimName}}</h2>
        </accordion-heading>
        <div class="details">
          <div class="row">

            <div class="col-sm-7">
              <h3>Shim configuration</h3>
                <div class="table-responsive">
                  <table class="table configuration">
                    <thead>
                      <tr>
                        <th class="col-sm-2"></th>
                        <th class="col-sm-5"></th>
                        <th class="col-sm-5"></th>
                      </tr>
                    </thead>
                    <tbody>

                      <tr ng-repeat="directive in shim.configuration.directives">
                        <th scope="row">{{directive.label}}</th>
                        <td>

                          <input type="number" class="form-control input-sm" ng-model="shim.configuration.values[directive.configPath]" ng-if="directive.type==='integer'" />

                          <input type="number" class="form-control input-sm" ng-model="shim.configuration.values[directive.configPath]" ng-if="directive.type==='float'"/>

                          <input type="text" value="value" class="form-control input-sm" ng-model="shim.configuration.values[directive.configPath]" ng-if="directive.type==='string'"/>

                          <ui-select ng-model="shim.configuration.value[directive.configPath]" ng-if="directive.type==='boolean'">
                            <ui-select-match placeholder="--">
                              {{$select.selected}}
                            </ui-select-match>
                            <ui-select-choices repeat="option in ['--','true','false']">
                              <div ng-bind="option"></div>
                            </ui-select-choices>
                          </ui-select>


                        </td>
                        <td class="description">
                          <span  ng-if="directive.description">
                            {{main.truncate(directive.description,70)}}
                            <span class="more" popover="{{directive.description}}" popover-trigger="mouseenter" ng-if="directive.description.length>70">more</span>
                          </span>
                        </td>
                      </tr>


                      <tr>
                        <td class="description save-config" colspan="3">
                          Changes will become active after they are saved.
                            <button type="button" class="btn btn-default btn-xs">save changes</button>
                        </td>
                      </tr>

                    </tbody>
                </table>
              </div>
            </div>

            <div class="col-sm-5">

<!-- TODO: Add stats -->
<!--               <h3>Vendor API Statistics</h3>
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <th class="col-sm-3"></th>
                        <th class="col-sm-7"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row" class="compact">Label</th>
                        <td class="compact">Information</td>
                      </tr>
                      <tr>
                        <th scope="row" class="compact">Another label</th>
                        <td class="compact">Information</td>
                      </tr>
                      <tr>
                        <th scope="row" class="compact">A very long label that has to break</th>
                        <td class="compact">Information</td>
                      </tr>
                      <tr>
                        <th scope="row" class="compact">Another label</th>
                        <td class="compact">Information</td>
                      </tr>
                    </tbody>
                </table>
              </div>
 -->

              <h3>Supported schemas</h3>
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <th class="col-sm-12"></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="compact flat-list">
                          <div ng-repeat="schema in shim.schemas">{{schema.namespace}}:{{schema.name}}:{{schema.version}}</div>
                        </td>
                      </tr>
                    </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>
    </accordion-group>

  </accordion>

</div>


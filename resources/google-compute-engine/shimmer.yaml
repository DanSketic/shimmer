# This deployment consists of a single instance running three Docker containers, namely the Shimmer console, the
# Shimmer resource server and MongoDB.

# This deployment configuration file describes all the resources used by the Cloud Deployment Manager deployment.
# see https://cloud.google.com/deployment-manager/configuration/create-configuration-file

imports:
  - path: container_manifest.yaml
  - path: vm_template.py

resources:
- name: shimmer
  type: vm_template.py  # a customisation of the instance resource type
  properties:
#    instanceImage: container-vm-v20150611 # doesn't work
#    instanceImage: container-vm-v20150806 # doesn't work
    instanceImage: container-vm-v20150317 # see https://cloud.google.com/compute/docs/containers/container_vms
    instanceName: shimmer-vm
    instanceZone: us-central1-a
    instanceMachineType: n1-standard-1
    instanceBootDiskType: pd-standard
    instanceNetwork: default
    containerManifest: container_manifest.yaml
